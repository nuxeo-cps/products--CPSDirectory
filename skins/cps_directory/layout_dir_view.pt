<tal:block define="layout options/layout;
                   dirname request/dirname;
                   dir here/portal_directories/?dirname;
                   id_field dir/id_field;
                   ">
<div class="group">
<form action="." method="post">
  <input type="hidden" name="dirname" value="." tal:attributes="value dirname" />
  <table cellpadding="2" cellspacing="2" border="0">
    <tr tal:repeat="row layout/rows">
      <tal:block repeat="cell row">
      <tal:block define="widget cell/widget">
        <td align="right" valign="top">
          <input type="hidden" name="id" value="."
            tal:condition="python: cell['widget_id']==id_field"
            tal:attributes="value cell/widget_rendered" />
          <span class="dlabel">
          <span i18n:translate="" tal:condition="widget/is_i18n"
            tal:content="widget/label">label</span
          ><span tal:condition="not:widget/is_i18n"
            tal:content="widget/label">label</span
          >&nbsp;:
          </span>
        </td>
        <td valign="top" colspan="1"
          tal:attributes="colspan python:cell['ncols']*2-1">
          <div tal:attributes="class widget/css_class|nothing">
            <tal:block replace="structure cell/widget_rendered" />
          </div>
        </td>
      </tal:block>
      </tal:block>
    </tr>
    <tr>
      <td></td>
      <td>
        <input type="submit" value="button_delete"
          name="cpsdirectory_entry_delete:method"
          class="destructive" i18n:attributes="value"
          tal:condition="dir/isDeleteEntryAllowed"
          tal:attributes="onclick python:'return window.confirm(\'%s\')' %
            (here.Localizer.default('description_confirm_delete'), )">
      </td>
    </tr>
  </table>
</form>
</div>
</tal:block>
